Download with resuming and segmented downloading